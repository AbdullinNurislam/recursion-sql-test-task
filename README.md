## Задача Python – иерархическое получение данных из БД ##

### Формулировка задачи ###

1. Необходимо импортировать данные по организациям и пользователям в SQL таблицу из приложенного к заданию json файла.
У компании есть офисы (type = 1) в нескольких городах, в каждом из них  есть отделы (type = 2),
где работают сотрудники (type = 3).
2. Необходимо реализовать выборку всех сотрудников по указанному идентификатору сотрудника.

Пример для данных, импортируемых из файла `data.json`:
- На вход утилите подается идентификатор сотрудника = 3
- На выходе получается список сотрудников в офисе Санкт-Петербурга: Иванов, Сидоров, Петров.

---
### Зависимости ###

* docker
* python ~ 3.6 - 3.8
* psycopg2==2.9.3

Проект реализован с использованием ОС Ubuntu 20.04

---
### Установка и запуск проекта ###

1. Клонируем проект и переходим в его директорию для дальнейшей работы:
    - `git clone https://github.com/AbdullinNurislam/recursion-sql-test-task`
    - `cd recursion-sql-test-task`

2. Настройка подключения к БД (выбираем только один из двух вариантов, какой удобнее):
    * 2.1. Запускаем докер контейнер с СУБД, если нет подходящего рабочего кластера:
        - `docker run -v $(pwd)/postgresql_data:/var/lib/postgresql/data --rm -d --name postgres9.6-test 
          -p 127.0.0.1:5435:5432 -e POSTGRES_HOST_AUTH_METHOD=trust -i postgres:9.6`
          
        для данного варианта настройки подключения к СУБД актуальны в файле `settings.py`
    * 2.2. в файле `settings.py` указать параметры подключения к СУБД от имени обычного пользователя,
      а также пароль для роли `postgres` для создания БД для задания 

3. Создаём виртуальное окружение, активируем его и устанавливаем в нём пакеты:
    - `python3 -m venv .env`
    - `source .env/bin/activate`
    - `pip install -r requirements.txt`

4. Запускаем команду для создания БД с таблицей и заполнения таблицы данными:
    - `python main.py build`

    (для выполнения первой части задания).

5. Запускаем команду для выборки всех сотрудников по указанному идентификатору сотрудника:
    - `python main.py employees --employee_id N`, где N - id сотрудника

    (для выполнения второй части задания).
